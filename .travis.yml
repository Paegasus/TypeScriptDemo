language: node_js
node_js:
  - "16"
os: linux
dist: xenial

before_script:
  - npm install -g typescript

script:
  - npm init --yes
  - tsc --init
  - ls -l
  - cat package.json
  - cat tsconfig.json

deploy:
  edge: true
  provider: releases
  token: $GITHUB_API_KEY
  file: $TRAVIS_BUILD_DIR/tsconfig.json
  name: dev-build-$TRAVIS_TAG
  release_notes: Automatic build of $TRAVIS_BRANCH ($TRAVIS_COMMIT) built by Travis CI on $(date +'%F %T %Z').
  prerelease: true
  overwrite: true
  target_commitish: $TRAVIS_COMMIT
  on:
    tags: true

after_deploy:
  - rm -rf $TRAVIS_BUILD_DIR/tsconfig.json
